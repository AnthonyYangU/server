const HexToDouble = require('./number');

function translate(string){
    let countForce1 = 56,
        countForce2=countForce1+26*16,
        countstress1=countForce2+26*16,
        countstress2=countstress1+26*16,
        countCurrent = countstress2+26*16;
    let force1,force2,stress1,stress2,current;
    let bagData=[];
    let 
        headId = string.substring(0,4),
        deviceId = string.substring(4,8),
        battery = HexToDouble(string.substring(8,24)).toFixed(2),
        temperature = HexToDouble(string.substring(24,40)).toFixed(2),
        deepth = HexToDouble(string.substring(40,56)).toFixed(2);
    for(let i=0;i<26;i++){
        force1 = HexToDouble(string.substring(countForce1,countForce1+16)).toFixed(2);
        force2 = HexToDouble(string.substring(countForce2,countForce2+16)).toFixed(2);
        stress1 = HexToDouble(string.substring(countstress1,countstress1+16)).toFixed(2);
        stress2 = HexToDouble(string.substring(countstress2,countstress2+16)).toFixed(2);
        current = HexToDouble(string.substring(countCurrent,countCurrent+16)).toFixed(2);
        countForce1 += 16;
        countForce2 += 16;
        countstress1 += 16;
        countstress2 += 16;
        countCurrent += 16;
        bagData.push({
            deviceId:deviceId,
            battery:battery,
            temperature:temperature,
            deepth:deepth,
            force1:force1,
            force2:force2,
            stress1:stress1,
            stress2:stress2,
            current:current
        })
    }
    return bagData;
}

// let t =translate("5a5b1001713d0ad7a370ed3f0000000000003940703d0ad7a370274000000000000045400000000000804640000000000000484000000000008049400000000000004b400000000000804c400000000000004e400000000000804f400000000000805040000000000040514000000000000052400000000000c052400000000000805340000000000040544000000000000055400000000000c055400000000000805640000000000040574000000000000058400000000000c0584000000000008059400000000000405a400000000000005b400000000000c05b400000000000805c400000000000405d4048e17a14ae471940a4703d0ad7a32440a4703d0ad7a32c4052b81e85eb51324052b81e85eb51364052b81e85eb513a4052b81e85eb513e40295c8fc2f5284140295c8fc2f5284340295c8fc2f5284540295c8fc2f5284740295c8fc2f5284940295c8fc2f5284b40295c8fc2f5284d40295c8fc2f5284f4014ae47e17a94504014ae47e17a94514014ae47e17a94524014ae47e17a94534014ae47e17a94544014ae47e17a94554014ae47e17a94564014ae47e17a94574014ae47e17a94584014ae47e17a94594014ae47e17a945a4000000000000010400000000000001c4000000000000024400000000000002a4000000000000030400000000000003340000000000000364000000000000039400000000000003c400000000000003f400000000000004140000000000080424000000000000044400000000000804540000000000000474000000000008048400000000000004a400000000000804b400000000000004d400000000000804e4000000000000050400000000000c050400000000000805140000000000040524000000000000053400000000000c053400000000000002840000000000000314000000000000036400000000000003b4000000000000040400000000000804240000000000000454000000000008047400000000000004a400000000000804c400000000000004f400000000000c050400000000000005240000000000040534000000000008054400000000000c055400000000000005740000000000040584000000000008059400000000000c05a400000000000005c400000000000405d400000000000805e400000000000c05f40000000000080604000000000002061400000000000003040333333333333314066666666666632409a99999999993340cdcccccccccc34400000000000003640333333333333374066666666666638409a99999999993940cccccccccccc3a400000000000003c403333333333333d406666666666663e409a99999999993f40666666666666404000000000000041409a999999999941403333333333334240cccccccccccc4240666666666666434000000000000044409a999999999944403333333333334540cccccccccccc454066666666666646400000000000004740");
// createData(t);
module.exports = translate;



