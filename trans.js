const HexToDouble = require('./number');

function translate(string){
    let countForce1 = 56,
        countForce2=countForce1+26*16,
        countstress1=countForce2+26*16,
        countstress2=countstress1+26*16,
        countCurrent = countstress2+26*16;
    let force1,force2,stress1,stress2,current;
    let bagData=[];
    let 
        headId = string.substring(0,4),
        deviceId = string.substring(4,8),
        battery = HexToDouble(string.substring(8,24)).toFixed(2),
        temperature = HexToDouble(string.substring(24,40)).toFixed(2),
        deepth = HexToDouble(string.substring(40,56)).toFixed(2);
    for(let i=0;i<26;i++){
        force1 = HexToDouble(string.substring(countForce1,countForce1+16)).toFixed(2);
        force2 = HexToDouble(string.substring(countForce2,countForce2+16)).toFixed(2);
        stress1 = HexToDouble(string.substring(countstress1,countstress1+16)).toFixed(2);
        stress2 = HexToDouble(string.substring(countstress2,countstress2+16)).toFixed(2);
        current = HexToDouble(string.substring(countCurrent,countCurrent+16)).toFixed(2);
        countForce1 += 16;
        countForce2 += 16;
        countstress1 += 16;
        countstress2 += 16;
        countCurrent += 16;
        bagData.push({
            deviceId:deviceId,
            battery:battery,
            temperature:temperature,
            deepth:deepth,
            force1:force1,
            force2:force2,
            stress1:stress1,
            stress2:stress2,
            current:current
        })
    }
    return bagData;
}

// let t =translate("5a5b10010000000000000000000000000000000000000000802c11400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");
// console.log(t);
module.exports = translate;



